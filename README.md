# BA Assist - Помощник бизнес-аналитика

BA Assist — интеллектуальный инструмент для бизнес-аналитиков, позволяющий организовать работу с проектами, документами и задачами.

## Новые возможности (Май 2025)

- **Бизнес-процессы**: добавлена поддержка иерархии бизнес-процессов в базе знаний
- **Улучшенная обработка файлов**: переработана система загрузки и обработки документов
- **Стабильная работа**: исправлены ошибки в авторизации и обработке API-запросов
- **Логирование**: добавлено подробное логирование для отладки и мониторинга
- **Docker**: добавлена поддержка запуска в Docker-контейнерах

## Ключевые возможности

- **Управление проектами:** создание и организация проектов
- **Работа с файлами:** загрузка и автоматическая обработка документов
- **Канбан-доска задач:** управление задачами с функцией drag-and-drop
- **Чат в проектах:** для коммуникации участников проекта
- **База знаний:** поиск по документам, глоссарий терминов, структура бизнес-процессов

## Технический стек

- **Frontend:** Next.js, React, TypeScript, Tailwind CSS
- **Backend:** Next.js API Routes, Node.js
- **База данных:** PostgreSQL, Prisma ORM
- **Хранение файлов:** Google Cloud Storage
- **Сервисы:** Parser Service (для извлечения текста)

## Быстрый старт

### Запуск в Docker (рекомендуемый способ)

1. **Клонирование репозитория**
   ```bash
   git clone https://github.com/yourusername/baassist.git
   cd baassist
   ```

2. **Настройка переменных окружения**
   ```bash
   cp .env.example .env
   # Отредактируйте .env файл, указав корректные значения
   ```

3. **Создание директории для сервисного аккаунта GCS**
   ```bash
   mkdir -p keys
   # Поместите JSON-файл ключа сервисного аккаунта GCS в директорию keys/
   ```

4. **Запуск с Docker Compose**
   ```bash
   docker compose up -d
   ```

5. **Доступ к приложению**
   
   Откройте [http://localhost:3000](http://localhost:3000) в браузере

### Ручная установка и запуск (для разработки)

1. **Установка зависимостей**
   ```bash
   npm install
   ```

2. **Настройка переменных окружения**
   ```bash
   cp .env.example .env
   # Отредактируйте .env файл, указав корректные значения
   ```

3. **Запуск миграций базы данных**
   ```bash
   npm run db:migrate
   npm run db:seed
   ```

4. **Запуск парсер-сервиса** (в отдельном терминале)
   ```bash
   cd parser
   npm install
   npm start
   ```

5. **Запуск основного приложения** (в другом терминале)
   ```bash
   npm run dev
   ```

## Структура проекта

```
baassist/
├── app/                # Next.js приложение (страницы, компоненты, API)
│   ├── api/            # API эндпоинты
│   ├── auth/           # Страницы аутентификации
│   ├── dashboard/      # Страницы дашборда и проектов
│   ├── knowledge/      # Страницы базы знаний
│   ├── lib/            # Вспомогательные библиотеки для клиентской части
│   └── services/       # Сервисы приложения
├── lib/                # Общие библиотеки
├── prisma/             # Модели данных и миграции
├── public/             # Статические ресурсы
├── parser/             # Сервис обработки файлов
├── nginx/              # Конфигурация Nginx для продакшена
├── keys/               # Директория для ключей GCS (не включается в Git)
└── scripts/            # Вспомогательные скрипты
```

## Скрипты

- `npm run dev` - Запуск сервера разработки
- `npm run build` - Сборка приложения
- `npm run start` - Запуск собранного приложения
- `npm run lint` - Проверка кода линтером
- `npm run db:migrate` - Запуск миграций базы данных
- `npm run db:seed` - Заполнение базы данных начальными данными
- `npm run db:reset` - Сброс базы данных и применение миграций
- `npm run db:studio` - Запуск Prisma Studio для просмотра базы данных

## Разворачивание на удаленном сервере

1. **Подготовка сервера**
   - Установите Docker и Docker Compose на сервер
   - Настройте домен и SSL (если необходимо)

2. **Клонирование репозитория**
   ```bash
   git clone https://github.com/yourusername/baassist.git
   cd baassist
   ```

3. **Настройка переменных окружения**
   ```bash
   cp .env.example .env
   # Отредактируйте .env файл для продакшена
   ```

4. **Настройка Nginx**
   - Отредактируйте `nginx/default.conf`, указав ваше доменное имя
   - Разместите SSL-сертификаты в `nginx/ssl/`

5. **Запуск приложения**
   ```bash
   docker compose up -d
   ```

## Диагностика проблем

При возникновении проблем с приложением:

1. Проверьте журналы контейнеров с помощью `docker compose logs -f [service_name]`
2. Проверьте параметры подключения к базе данных и GCS в файле `.env`
3. Проверьте страницу диагностики: [/api/health/all](/api/health/all)
4. Удостоверьтесь, что парсер-сервис запущен и доступен

Подробную информацию о решении проблем смотрите в файле [TROUBLESHOOTING.md](TROUBLESHOOTING.md).

## Лицензия

Данное программное обеспечение защищено авторским правом.